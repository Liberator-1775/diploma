(()=>{"use strict";var e,t,a,o,n={534:(e,t,a)=>{a.a(e,(async(e,t)=>{try{var o=a(185);const n=await(0,o.Z)("#googleApiKey"),r=await(0,o.Z)("#googleSubmit"),i=await(0,o.Z)("#deeplApiKey"),s=await(0,o.Z)("#deeplSubmit"),c=await(0,o.Z)("#speakingRate"),d=await(0,o.Z)("#translationToggle"),l=await(0,o.Z)("#targetLanguage"),u=await(0,o.Z)("#errorMessage"),p=await(0,o.Z)("#googleSection"),g=await(0,o.Z)("#deeplSection"),h=await(0,o.Z)("#speedSection"),v=await(0,o.Z)("#translationSection"),m=await(0,o.Z)("#languageSection"),y=await(0,o.Z)("#speedValue");async function f(e,t){let a,o="";"google"===t?(o=`https://texttospeech.googleapis.com/v1/text:synthesize?key=${e}`,a={input:{text:""},voice:{languageCode:"RU"},audioConfig:{audioEncoding:"MP3"}}):"deepl"===t&&(o=`https://api.deepl.com/v2/translate?auth_key=${e}&text=test&target_lang=EN`);try{return(await fetch(o,{method:"POST",body:JSON.stringify(a)})).ok}catch(e){return!1}}async function w(e,t){await new Promise((a=>{chrome.storage.local.set({[e]:t},(()=>{a()}))}))}function L(){const e=n.value.trim();f(e,"google").then((t=>{t?(w("googleApiKey",e).catch((e=>{console.error(e)})),p.classList.add("hidden"),g.classList.remove("hidden"),h.classList.remove("hidden")):u.classList.remove("hidden")})).catch((e=>{console.error(e)}))}function b(){const e=i.value.trim();f(e,"deepl").then((t=>{t?(w("deeplApiKey",e).catch((e=>{console.error(e)})),i.classList.add("hidden"),s.classList.add("hidden"),v.classList.remove("hidden")):u.classList.remove("hidden")})).catch((e=>{console.error(e)}))}function k(){const e=d.checked;w("translationEnabled",e).catch((e=>{console.error(e)})),e?m.classList.remove("hidden"):(m.classList.add("hidden"),l.selectedIndex=0,w("targetLanguage",l.value).catch((e=>{console.error(e)})))}function S(){const e=parseFloat(c.value).toFixed(2);y.textContent=e,w("speakingRate",e).catch((e=>{console.error(e)}))}function _(){w("targetLanguage",l.value).catch((e=>{console.error(e)}))}r.addEventListener("click",L),s.addEventListener("click",b),d.addEventListener("change",k),c.addEventListener("input",S),l.addEventListener("change",_),chrome.storage.local.get(["googleApiKey","deeplApiKey","targetLanguage","translationEnabled","speakingRate"],(e=>{e.googleApiKey&&(p.classList.add("hidden"),g.classList.remove("hidden"),h.classList.remove("hidden")),e.deeplApiKey&&(g.classList.add("hidden"),v.classList.remove("hidden")),e.translationEnabled&&(d.checked=!0,m.classList.remove("hidden")),e.targetLanguage&&(l.value=e.targetLanguage),e.speakingRate&&(c.value=e.speakingRate,y.textContent=e.speakingRate)})),t()}catch(x){t(x)}}),1)},185:(e,t,a)=>{async function o(e){return await new Promise((t=>{const a=document.querySelector(e);if(null!=a)return void t(a);const o=new MutationObserver((()=>{const a=document.querySelector(e);null!=a&&(o.disconnect(),t(a))}));o.observe(document.body,{childList:!0,subtree:!0})}))}var n;a.d(t,{Z:()=>o}),function(e){e[e.voiceRequest=0]="voiceRequest",e[e.voiceResponse=1]="voiceResponse"}(n||(n={}))}},r={};function i(e){var t=r[e];if(void 0!==t)return t.exports;var a=r[e]={exports:{}};return n[e](a,a.exports,i),a.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",a="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",o=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},i.a=(n,r,i)=>{var s;i&&((s=[]).d=-1);var c,d,l,u=new Set,p=n.exports,g=new Promise(((e,t)=>{l=t,d=e}));g[t]=p,g[e]=e=>(s&&e(s),u.forEach(e),g.catch((e=>{}))),n.exports=g,r((n=>{var r;c=(n=>n.map((n=>{if(null!==n&&"object"==typeof n){if(n[e])return n;if(n.then){var r=[];r.d=0,n.then((e=>{i[t]=e,o(r)}),(e=>{i[a]=e,o(r)}));var i={};return i[e]=e=>e(r),i}}var s={};return s[e]=e=>{},s[t]=n,s})))(n);var i=()=>c.map((e=>{if(e[a])throw e[a];return e[t]})),d=new Promise((t=>{(r=()=>t(i)).r=0;var a=e=>e!==s&&!u.has(e)&&(u.add(e),e&&!e.d&&(r.r++,e.push(r)));c.map((t=>t[e](a)))}));return r.r?d:i()}),(e=>(e?l(g[a]=e):d(p),o(s)))),s&&s.d<0&&(s.d=0)},i.d=(e,t)=>{for(var a in t)i.o(t,a)&&!i.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i(534)})();